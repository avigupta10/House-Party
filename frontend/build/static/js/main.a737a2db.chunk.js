(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(12),i=n.n(o),r=(n(105),n(106),n(36)),s=n(8),j=n(159),l=n(49),u=n(180),d=n(120),b=n(35),h=n(2);var O=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),r=Object(s.a)(i,2),O=r[0],p=r[1],x=Object(a.useState)(""),m=Object(s.a)(x,2),f=m[0],g=m[1];return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{variant:"h4",component:"h4",children:"Join a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(u.a,{label:"Name",placeholder:"Enter Your Name",value:O,variant:"outlined",onChange:function(e){p(e.target.value)}})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(u.a,{error:f,label:"Code",placeholder:"Enter a RoomCode",value:c,helperText:f,variant:"outlined",onChange:function(e){o(e.target.value)}})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c})};fetch("/api/join-room",t).then((function(t){t.ok?(e.history.push("/room/".concat(c)),function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O})};fetch("/spotify/set-name",e).then((function(e){return console.log(e.json())}))}()):g("Room Not Found")})).catch((function(e){return console.error(e)}))},children:"Enter Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{variant:"contained",color:"secondary",to:"/",component:b.b,children:"Back"})})]})},p=n(166),x=n(163),m=n(182),f=n(185),g=n(169),v=n(167),y=n(184);function C(e){var t=Object(a.useState)(e.guest_can_pause),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(e.votes_to_skip),r=Object(s.a)(i,2),O=r[0],C=r[1],S=Object(a.useState)(""),_=Object(s.a)(S,2),k=_[0],T=_[1],P=Object(a.useState)(""),R=Object(s.a)(P,2),N=R[0],w=R[1],E=function(){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:O,guest_can_pause:c})};fetch("/api/create-room",t).then((function(e){return e.json()})).then((function(t){return e.history.push("/room/"+t.code)}))},I=function(){var t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes_to_skip:O,guest_can_pause:c,code:e.code})};fetch("/api/settings-room",t).then((function(t){t.ok?w("Room Updated Successfully"):T("Error Updating Room"),e.updateCallback()}))};return Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(v.a,{in:""!==k||""!==N,children:""!==N?Object(h.jsx)(y.a,{severity:"success",onClose:function(){w("")},children:N}):Object(h.jsx)(y.a,{severity:"danger",onClose:function(){T("")},children:k})})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(l.a,{component:"h4",variant:"h4",children:e.update?"Settings Room":"Create a Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{component:"fieldset",children:[Object(h.jsx)(p.a,{children:Object(h.jsx)("div",{align:"center",children:"Guest Control of Playback State"})}),Object(h.jsxs)(f.a,{row:!0,defaultValue:e.guest_can_pause.toString(),onChange:function(e){o("true"===e.target.value)},children:[Object(h.jsx)(g.a,{value:"true",control:Object(h.jsx)(m.a,{color:"primary"}),label:"Play/Pause",labelPlacement:"bottom"}),Object(h.jsx)(g.a,{value:"false",control:Object(h.jsx)(m.a,{color:"secondary"}),label:"No Control",labelPlacement:"bottom"})]})]})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(u.a,{required:"true",type:"number",defaultValue:e.votes_to_skip,onChange:function(e){C(e.target.value)},inputProps:{min:1,style:{textAlign:"center"}}}),Object(h.jsx)(p.a,{children:Object(h.jsx)("div",{align:"center",children:"Votes Required To Skip Song"})})]})}),e.update?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:I,children:"Update Room"})}):Object(h.jsxs)(j.a,{container:!0,spacing:1,children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained",onClick:E,children:"Create A Room"})}),Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",to:"/",component:b.b,children:"Back"})})]})]})}C.defaultProps={votes_to_skip:2,guest_can_pause:!0,update:!1,code:null,updateCallback:function(){}};var S=C,_=n(178),k=n(170),T=n(168),P=n(171),R=n(83),N=n.n(R),w=n(82),E=n.n(w),I=n(84),J=n.n(I);var q=function(e){var t=e.time/e.duration*100;return Object(h.jsxs)(k.a,{children:[Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:4,children:Object(h.jsx)("img",{src:e.image_url,height:"100%",width:"100%"})}),Object(h.jsxs)(j.a,{item:!0,xs:8,children:[Object(h.jsx)(l.a,{component:"h5",variant:"h5",children:e.song_title}),Object(h.jsx)(l.a,{color:"textSecondary",component:"h5",variant:"subtitle1",children:e.artist}),Object(h.jsxs)("div",{children:[Object(h.jsx)(T.a,{onClick:function(){e.is_playing?fetch("/spotify/pause-song",{method:"PUT",headers:{"Content-Type":"application/json"}}):fetch("/spotify/play-song",{method:"PUT",headers:{"Content-Type":"application/json"}})},children:e.is_playing?Object(h.jsx)(E.a,{}):Object(h.jsx)(N.a,{})}),Object(h.jsx)(T.a,{onClick:function(){fetch("/spotify/skip-song",{method:"POST",headers:{"Content-Type":"application/json"}})},children:Object(h.jsx)(J.a,{})}),Object(h.jsxs)(l.a,{component:"p",variant:"p",children:["Votes required to skip: ",e.votes," / ",e.votes_required]})]})]})]}),Object(h.jsx)(P.a,{variant:"determinate",value:t})]})},L=n(70),U=n.n(L),A=n(85),B=n(181),F=n(172);function G(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),j=i[0],l=i[1],d=Object(a.useState)(""),b=Object(s.a)(d,2),O=b[0],p=b[1],x=function(e){var t=e.target.value;t?(p(e.target.value),l(!0),function(e){m.apply(this,arguments)}(t)):(p(t),c([]))};function m(){return(m=Object(A.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spotify/search-song?query=".concat(t)).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){l(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)(B.a,{id:"combo-box-demo",options:n,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},style:{width:300},loading:j,onChange:function(e,t){!function(e){var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uris:e})};fetch("/spotify/play-search",t)}(t.uri),l(!1)},renderInput:function(e){return Object(h.jsx)(u.a,Object(r.a)(Object(r.a)({},e),{},{label:"Search Song",variant:"outlined",onChange:x,value:O,InputProps:Object(r.a)(Object(r.a)({},e.InputProps),{},{endAdornment:Object(h.jsxs)(a.Fragment,{children:[j?Object(h.jsx)(F.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}var V=n(173),H=n(183),z=n(174),D=n(121),M=n(175),Y=n(176),K=n(87),Q=n.n(K),W=n(177),X=n(165),Z=Object(V.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"rgba(209, 222, 185, 0.99)",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function $(e){var t=Z(),n=c.a.useState(!1),a=Object(s.a)(n,2),o=a[0],i=a[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(d.a,{color:"primary",type:"button",variant:"outlined","aria-label":"Listeners",onClick:function(){i(!0)},children:"Listeners"}),Object(h.jsx)(H.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:o,onClose:function(){i(!1)},closeAfterTransition:!0,BackdropComponent:z.a,BackdropProps:{timeout:500},children:Object(h.jsx)(D.a,{in:o,children:Object(h.jsxs)("div",{className:t.paper,children:[Object(h.jsx)("h2",{id:"transition-modal-title",children:"Listeners"}),Object(h.jsxs)(X.a,{"aria-label":"Guests",children:[Object(h.jsxs)(M.a,{button:!0,children:[Object(h.jsx)(Y.a,{children:Object(h.jsx)(Q.a,{})}),Object(h.jsx)(W.a,{primary:e.hostName})]}),e.song.GUESTS&&e.song.GUESTS.map((function(e){return Object(h.jsx)(M.a,{button:!0,children:Object(h.jsx)(W.a,{inset:!0,primary:e})})}))]})]})})})]})}var ee=function(e){var t=Object(a.useState)(2),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),r=Object(s.a)(i,2),u=r[0],b=r[1],O=Object(a.useState)(!1),p=Object(s.a)(O,2),x=p[0],m=p[1],f=Object(a.useState)(!1),g=Object(s.a)(f,2),v=g[0],y=g[1],C=Object(a.useState)(!1),k=Object(s.a)(C,2),T=(k[0],k[1]),P=Object(a.useState)(""),R=Object(s.a)(P,2),N=R[0],w=R[1],E=Object(a.useState)({}),I=Object(s.a)(E,2),J=I[0],L=I[1],U=e.match.params.code;Object(a.useEffect)((function(){var e=setInterval(F,1e3);return function(){clearInterval(e)}}),[]);var A=function(){fetch("/api/get-room?code="+U).then((function(t){return t.ok||(e.leaveRoomCallback(),e.history.push("/")),t.json()})).then((function(e){o(e.votes_to_skip),b(e.guest_can_pause),m(e.is_host),x&&B()}))},B=function(){fetch("/spotify/is-authenticated").then((function(e){return e.json()})).then((function(e){T(e.status),e.status||fetch("/spotify/get-auth-url").then((function(e){return e.json()})).then((function(e){window.location.replace(e.url)}))}))},F=function(){fetch("/spotify/current-song").then((function(e){return e.ok?e.json():{}})).then((function(e){L(e),w(e.username)}))},V=function(e){y(e)};return A(),v?Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(S,{update:!0,guest_can_pause:u,votes_to_skip:c,code:U,updateCallback:A})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained","aria-label":"settings",onClick:function(){V(!1)},children:"Close"})})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)($,{song:J,hostName:N})}),Object(h.jsxs)(j.a,{container:!0,spacing:1,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,align:"top",children:Object(h.jsx)(l.a,{variant:"p",component:"p",children:Object(h.jsxs)("blockquote",{children:["Logged in as ",x?N:J.guest_name," "]})})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(G,{})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(l.a,{variant:"h4",component:"h4",children:["Code: ",U]})}),Object(h.jsx)(q,{time:J.time,duration:J.duration,name:J.username,votes:J.votes,votes_required:J.votes_required,song_title:J.title,is_playing:J.is_playing,image_url:J.image_url,artist:J.artist}),x?Object(h.jsx)(j.a,{item:!0,xs:12,align:"center",children:Object(h.jsx)(d.a,{color:"primary",variant:"contained","aria-label":"settings",startIcon:Object(h.jsx)(_.a,{}),onClick:function(){V(!0)},children:"Settings"})}):null,Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){fetch("/api/leave-room",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(t){e.leaveRoomCallback(),e.history.push("/")}))},children:"Leave Room"})})]})]})},te=n(13),ne=n(179);var ae=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){fetch("/api/user-in-room").then((function(e){return e.json()})).then((function(e){c(e.code)}))}),[]);var o=function(){c(null)};return Object(h.jsx)(b.a,{children:Object(h.jsxs)(te.d,{children:[Object(h.jsx)(te.b,{exact:!0,path:"/",render:function(){return n?Object(h.jsx)(te.a,{to:"/room/".concat(n)}):Object(h.jsxs)(j.a,{container:!0,spacing:3,align:"center",children:[Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsx)(l.a,{variant:"h3",component:"h3",children:"House Party"})}),Object(h.jsx)(j.a,{item:!0,xs:12,children:Object(h.jsxs)(ne.a,{disableElevation:!0,variant:"contained",color:"primary",children:[Object(h.jsx)(d.a,{color:"primary",to:"/join",component:b.b,children:"Join a Room"}),Object(h.jsx)(d.a,{color:"secondary",to:"/create",component:b.b,children:"Create a Room"})]})})]})}}),Object(h.jsx)(te.b,{path:"/join",component:O}),Object(h.jsx)(te.b,{path:"/create",component:S}),Object(h.jsx)(te.b,{path:"/room/:code",render:function(e){return Object(h.jsx)(ee,Object(r.a)(Object(r.a)({},e),{},{leaveRoomCallback:o}))}})]})})};var ce=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(ae,{})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(ce,{})}),document.getElementById("root")),oe()}},[[118,1,2]]]);
//# sourceMappingURL=main.a737a2db.chunk.js.map